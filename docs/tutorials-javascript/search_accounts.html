<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" >

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
		<link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Cousine|Inconsolata" rel="stylesheet">
		
		<link rel="shortcut icon" type="image/png" href="/favicon.png">
		

		
		<link rel="stylesheet" href="/css/style.css">
		<link rel="stylesheet" href="/css/css/fontawesome-all.min.css">
		<script src="/js/main.js"></script>
		

		<!-- Begin Jekyll SEO tag v2.1.0 -->
<title>Search Accounts - Steem Developer</title>
<meta property="og:title" content="Search Accounts" />
<meta name="description" content="By the end of this tutorial you should know how to call a list of user names from the steem blockchain" />
<meta property="og:description" content="By the end of this tutorial you should know how to call a list of user names from the steem blockchain" />
<link rel="canonical" href="https://developer.steem.io/tutorials-javascript/search_accounts" />
<meta property="og:url" content="https://developer.steem.io/tutorials-javascript/search_accounts" />
<meta property="og:site_name" content="Steem Developer" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-07-03T16:28:31-05:00" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "Search Accounts",
"datePublished": "2018-07-03T16:28:31-05:00",
"description": "By the end of this tutorial you should know how to call a list of user names from the steem blockchain",
"url": "https://developer.steem.io/tutorials-javascript/search_accounts"}</script>
<!-- End Jekyll SEO tag -->


		
	</head>
	<body>
		<header>
			<h1>
				
					<a href="/"><img src="/images/logotype_white.svg" height="40" alt="Steem Developer logo"></a>
				
				<a href="/" class="logo-link"></a>
				<button type="button" class="open-nav" id="open-nav"></button>
			</h1>

			
				<form action="/search/" method="get">
					<input type="text" name="q" id="search-input" placeholder="Search">
					<input type="submit" value="Search" style="display: none;">
				</form>
			

			<div id="sidebar" class="sidebar">
	
	
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/">
		<h6 class="ctrl-nav-section title">Introduction</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/#introduction-welcome">Welcome to Steem</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/quickstart/">
		<h6 class="ctrl-nav-section title">Quickstart</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/quickstart/#quickstart-choose-library">Choose Library</a></li>
						
					
						
						<li><a href="/quickstart/#quickstart-steemd-nodes">steemd Nodes</a></li>
						
					
						
						<li><a href="/quickstart/#quickstart-testnet">Steem Testnet</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/tutorials/">
		<h6 class="ctrl-nav-section title">Tutorials</h6>
		<ul class="cont-nav-section content">
			
				
					
						<li><a href="/tutorials/#tutorials-javascript">Javascript</a></li>
					
				
					
						<li><a href="/tutorials/#tutorials-python">Python</a></li>
					
				
					
						<li><a href="/tutorials/#tutorials-ruby">Ruby</a></li>
					
				
					
						<li><a href="/tutorials/#tutorials-recipes">Recipes</a></li>
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/services/">
		<h6 class="ctrl-nav-section title">Services</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/services/#services-steemit">Steemit.com</a></li>
						
					
						
						<li><a href="/services/#services-sbds">SBDS</a></li>
						
					
						
						<li><a href="/services/#services-jussi">jussi</a></li>
						
					
						
						<li><a href="/services/#services-steemconnect">SteemConnect</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/apidefinitions/">
		<h6 class="ctrl-nav-section title">Appbase API</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/apidefinitions/#apidefinitions-condenser-api">Condenser Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-account-by-key-api">Account By Key Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-broadcast-ops-comment">Broadcast Ops Comment</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-account-history-api">Account History Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-database-api">Database Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-follow-api">Follow Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-jsonrpc">Jsonrpc</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-market-history-api">Market History Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-network-broadcast-api">Network Broadcast Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-tags-api">Tags Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-witness-api">Witness Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-block-api">Block Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-broadcast-ops">Broadcast Ops</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/community/">
		<h6 class="ctrl-nav-section title">Community</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/community/#community-overview">Overview</a></li>
						
					
						
						<li><a href="/community/#community-resources">Resources</a></li>
						
					
						
						<li><a href="/community/#community-developeradvocate">Sharing & Help</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/glossary/">
		<h6 class="ctrl-nav-section title">Glossary</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/glossary/#glossary-chain-basics">Chain Basics</a></li>
						
					
						
					
						
						<li><a href="/glossary/#glossary-governance">Governance</a></li>
						
					
						
						<li><a href="/glossary/#glossary-transactions">Transactions</a></li>
						
					
						
						<li><a href="/glossary/#glossary-api">API</a></li>
						
					
						
						<li><a href="/glossary/#glossary-market">Market</a></li>
						
					
				
			
		</ul>
	</section>
	
</div>


			<!--<p class="copyright">-->
				<!--<a href="https://steemit.com.com/">-->
				  <!--steemit-->
				<!--</a>-->
			<!--</p>-->
			<link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">
		</header>
		<div class="main" id="top">
			<div class="hero">
				<h1 class="hero__h1">Steem Developer Portal </h1>
				
				<img class="hero__img" src="/images/hero.png">
				
			</div>
			<section id="tutorials-javascript-search-accounts" class="row tutorials-javascript-search-accounts">
	<h3>
		<a id="tutorials-javascript-search-accounts">
			Search Accounts
			
		</a>
	</h3>
	
		<p class="description">By the end of this tutorial you should know how to call a list of user names from the steem blockchain</p>
	

	<p>This tutorial will show the method of capturing a queried user name, matching that to the steemit database and then displaying the matching names. This tutorial will be run on the <code class="highlighter-rouge">production server</code>.</p>

<h2 id="intro">Intro</h2>

<p>We are using the <code class="highlighter-rouge">call</code> function provided by the <code class="highlighter-rouge">dsteem</code> library to pull user names from the steem blockchain. The information being pulled is dependent on two variables:</p>

<ol>
  <li>The max number of user names that needs to be displayed by the search</li>
  <li>The string representing the first characters of the user name you are searching for</li>
</ol>

<p>A simple HTML interface is used to both capture the string query as well as display the completed search. The layout can be found in the “index.html” file.</p>

<h2 id="steps">Steps</h2>

<ol>
  <li><a href="#configure_connection"><strong>Configure connection</strong></a> Configuration of <code class="highlighter-rouge">dsteem</code> to use the proper connection and network.</li>
  <li><a href="#collecting_input_variables"><strong>Collecting input variables</strong></a> Assigning and collecting the necessary variables</li>
  <li><a href="#blockchain_query"><strong>Blockchain query</strong></a> Finding the data on the blockchain based on the inputs</li>
  <li><a href="#output"><strong>Output</strong></a> Displaying query results</li>
</ol>

<h4 id="1-configure-connection">1. <strong>Configure connection</strong><a name="configure_connection"></a></h4>

<p>Below we have <code class="highlighter-rouge">dsteem</code> pointing to the production network with the proper chainId, addressPrefix, and endpoint. There is a <code class="highlighter-rouge">public/app.js</code> file which holds the Javascript segment of this tutorial. In the first few lines we define the configured library and packages:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">dsteem</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'dsteem'</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">opts</span> <span class="o">=</span> <span class="p">{};</span>
<span class="c1">//connect to production server</span>
<span class="nx">opts</span><span class="p">.</span><span class="nx">addressPrefix</span> <span class="o">=</span> <span class="s1">'STM'</span><span class="p">;</span>
<span class="nx">opts</span><span class="p">.</span><span class="nx">chainId</span> <span class="o">=</span>
	<span class="s1">'0000000000000000000000000000000000000000000000000000000000000000'</span><span class="p">;</span>
<span class="c1">//connect to server which is connected to the network/production</span>
<span class="kr">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dsteem</span><span class="p">.</span><span class="nx">Client</span><span class="p">(</span><span class="s1">'https://api.steemit.com'</span><span class="p">);</span>
</code></pre>
</div>

<h4 id="2--collecting-input-variables">2.  <strong>Collecting input variables</strong><a name="collecting_input_variables"></a></h4>

<p>Next we assign the max number of lines that will be returned by the query. We also use <code class="highlighter-rouge">getElementById</code> to retrieve the requested user name for searching from the HTML interface. The <code class="highlighter-rouge">max</code> value can very easily also be attained from the HTML side simply by adding another input line in <code class="highlighter-rouge">index.html</code> and a second <code class="highlighter-rouge">getElementById</code> line.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">max</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">submitAcc</span> <span class="o">=</span> <span class="nx">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">accSearch</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"username"</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</code></pre>
</div>

<h4 id="3--blockchain-query">3.  <strong>Blockchain query</strong><a name="blockchain_query"></a></h4>

<p>The next step is to pull the user names from the blockchain that matches the “username” variable that was retrieved. This is done using the <code class="highlighter-rouge">database.call</code> function and assigning the result to an array.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">_accounts</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">database</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s1">'lookup_accounts'</span><span class="p">,[</span><span class="nx">accSearch</span><span class="p">,</span> <span class="nx">max</span><span class="p">]);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="err">`</span><span class="nx">_accounts</span><span class="err">:`</span><span class="p">,</span> <span class="nx">_accounts</span><span class="p">);</span>
</code></pre>
</div>

<h4 id="4--output">4.  <strong>Output</strong><a name="output"></a></h4>

<p>Finally we create a list from the “_accounts” array generated in step 3.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'accList'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">_accounts</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">'&lt;br&gt;'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>

<h2 id="to-run-this-tutorial">To run this tutorial</h2>

<ol>
  <li>clone this repo</li>
  <li><code class="highlighter-rouge">cd tutorials/15_search_accounts</code></li>
  <li><code class="highlighter-rouge">npm i</code></li>
  <li><code class="highlighter-rouge">npm run dev-server</code> or <code class="highlighter-rouge">npm run start</code></li>
  <li>After a few moments, the server should be running at <a href="http://localhost:3000/">http://localhost:3000/</a></li>
</ol>

</section>

		</div>
		<script>
			document.getElementById("open-nav").addEventListener("click", function () {
				document.body.classList.toggle("nav-open");
			});
		</script>
	</body>
</html>


<script src="/js/adjust.js"></script>

